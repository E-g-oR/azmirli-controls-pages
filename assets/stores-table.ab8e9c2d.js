var r4=Object.defineProperty,t4=Object.defineProperties;var n4=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var s4=Object.prototype.hasOwnProperty,a4=Object.prototype.propertyIsEnumerable;var W=(t,r,i)=>r in t?r4(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,c=(t,r)=>{for(var i in r||(r={}))s4.call(r,i)&&W(t,i,r[i]);if(V)for(var i of V(r))a4.call(r,i)&&W(t,i,r[i]);return t},g=(t,r)=>t4(t,n4(r));import{V as o4,ab as X,a3 as S,r as E,ad as i4,ac as l4,n as d,l as u,a4 as M,al as c4,am as d4,ao as m4}from"./index.cbf16599.js";import{h as C4,m as Y,i as g4,g as $,j as h,l as P,I as Q,S as G,n as p4,k as b,T as J,E as h4,D as E4,a as y4,b as B4,c as T4,F as b4}from"./index.26fc1388.js";import{M as K}from"./MenuItem.23cd827a.js";import{I as U}from"./menu.b764adf4.js";import{B as k}from"./Box.3819ed04.js";import{T as k4}from"./Typography.8d45c657.js";import"./listItemTextClasses.02faf840.js";const p=o4(t=>({isOpen:!1,mode:"create",stores:null,currentStore:null,setIsOpen:r=>t({isOpen:r}),setStores:r=>t({stores:r}),setMode:r=>t({mode:r}),setCurrentStore:r=>t({currentStore:r,mode:"edit"}),clearCurrentStore:()=>t({currentStore:null,mode:"create"})})),F4=t=>()=>l4("stores",t),D4=t=>()=>i4("stores",t.id,t),Z=["\u0443\u043B\u0438\u0446\u0430","\u043F\u0435\u0440\u0435\u0443\u043B\u043E\u043A","\u043F\u0440\u043E\u0441\u043F\u0435\u043A\u0442"],m={cityName:"",building:"",comment:"",streetName:"",streetType:Z[0],workingTimeStart:"9",workingTimeEnd:"21"},x4=()=>{const{enqueueSnackbar:t}=X(),{control:r,handleSubmit:i,setValue:l,reset:y,clearErrors:B}=C4({defaultValues:m}),C=p(e=>e.mode),N=p(e=>e.isOpen),n=p(e=>e.currentStore),q=p(e=>e.setIsOpen),s=p(e=>e.clearCurrentStore),F=S(e=>e.getCityById),D=S(e=>e.getCityByName),O=S(e=>e.cities),z=E.exports.useCallback(()=>{y(m),B()},[y,B]),A=()=>{z(),q(!1),s()};E.exports.useEffect(()=>{var e,a,o,x,w,I,v,f,T;l("streetType",(e=n==null?void 0:n.streetType)!=null?e:m.streetType),l("streetName",(a=n==null?void 0:n.streetName)!=null?a:m.streetName),l("building",(o=n==null?void 0:n.building)!=null?o:m.building),l("comment",(x=n==null?void 0:n.comment)!=null?x:m.comment),l("workingTimeStart",(w=n==null?void 0:n.workingTimeStart)!=null?w:m.workingTimeStart),l("workingTimeEnd",(I=n==null?void 0:n.workingTimeEnd)!=null?I:m.workingTimeEnd),l("cityName",(T=(f=F((v=n==null?void 0:n.cityId)!=null?v:""))==null?void 0:f.name)!=null?T:m.cityName)},[n]);const R=()=>{t("Success",{variant:"success"}),A(),z()},j=()=>{t("Something went wrong",{variant:"error"})},_=E.exports.useMemo(()=>`${C==="create"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C":"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"} \u043C\u0430\u0433\u0430\u0437\u0438\u043D`,[C]),u4=E.exports.useCallback(e=>{var H,L;const{workingTimeEnd:a,workingTimeStart:o,comment:x,building:w,streetType:I,streetName:v,cityName:f}=e,T={workingTimeStart:o,workingTimeEnd:a,comment:x,building:w,streetType:I,streetName:v,cityId:(L=(H=D(f))==null?void 0:H.id)!=null?L:""},e4=C==="edit"&&n?D4(c(c({},n),T)):F4(T);return Y(e4,R,j)},[C,n,R,j]);return d(g4,{isOpen:N,onClose:A,onCancel:A,onSubmit:i(u4),title:_,children:[u($,{children:"\u0410\u0434\u0440\u0435\u0441"}),u(h,{name:"cityName",rules:{required:{message:"\u0413\u043E\u0440\u043E\u0434 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:r,render:({field:e,fieldState:a})=>d(P,{fullWidth:!0,error:!!a.error,children:[u(Q,{id:"store-city-name",children:"\u0413\u043E\u0440\u043E\u0434"}),u(G,g(c({labelId:"store-city-name",id:"city-name",variant:"outlined",title:"\u0413\u043E\u0440\u043E\u0434",label:"\u0413\u043E\u0440\u043E\u0434"},e),{MenuProps:{sx:{maxHeight:300}},children:O==null?void 0:O.map(o=>u(K,{value:o.name,children:o.name},o.id))})),a.error&&u(p4,{children:a.error.message})]})}),d(M,{direction:"row",spacing:3,children:[u(h,{name:"streetType",rules:{required:{message:"\u0422\u0438\u043F \u0443\u043B\u0438\u0446\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:r,render:({field:e})=>d(P,{sx:{width:270},children:[u(Q,{id:"store-street-type",children:"\u0422\u0438\u043F"}),u(G,g(c({labelId:"store-street-type",id:"street-type",variant:"outlined",title:"\u0422\u0438\u043F",label:"\u0422\u0438\u043F"},e),{children:Z.map(a=>u(K,{value:a,children:a},a))}))]})}),u(h,{name:"streetName",rules:{required:{message:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0443\u043B\u0438\u0446\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:r,render:({field:e,fieldState:a})=>{var o;return u(b,g(c({label:"\u0423\u043B\u0438\u0446\u0430",variant:"filled",fullWidth:!0},e),{error:!!a.error,helperText:(o=a.error)==null?void 0:o.message}))}}),u(h,{name:"building",rules:{required:{message:"\u041D\u043E\u043C\u0435\u0440 \u0437\u0434\u0430\u043D\u0438\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:r,render:({field:e,fieldState:a})=>{var o;return u(b,g(c({label:"\u0417\u0434\u0430\u043D\u0438\u0435",variant:"filled"},e),{error:!!a.error,helperText:(o=a.error)==null?void 0:o.message}))}})]}),u(h,{name:"comment",control:r,render:({field:e,fieldState:a})=>{var o;return u(b,g(c({label:"\u041A\u043E\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439",variant:"filled",fullWidth:!0},e),{error:!!a.error,helperText:(o=a.error)==null?void 0:o.message}))}}),u($,{children:"\u0420\u0430\u0431\u043E\u0447\u0435\u0435 \u0432\u0440\u0435\u043C\u044F:"}),d(M,{direction:"row",spacing:3,children:[u(h,{name:"workingTimeStart",control:r,rules:{required:{message:"\u0412\u0440\u0435\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},render:({field:e,fieldState:a})=>{var o;return u(b,g(c({label:"\u041D\u0430\u0447\u0430\u043B\u043E",variant:"filled"},e),{error:!!a.error,helperText:(o=a.error)==null?void 0:o.message}))}}),u(h,{name:"workingTimeEnd",control:r,rules:{required:{message:"\u0412\u0440\u0435\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},render:({field:e,fieldState:a})=>{var o;return u(b,g(c({label:"\u041A\u043E\u043D\u0435\u0446",variant:"filled"},e),{error:!!a.error,helperText:(o=a.error)==null?void 0:o.message}))}})]})]})},w4=t=>()=>m4("stores",t),M4=()=>{const t=p(s=>s.setMode),r=p(s=>s.setIsOpen),i=S(s=>s.getCityById),l=p(s=>s.setCurrentStore),{enqueueSnackbar:y}=X(),B=E.exports.useCallback(s=>{t("edit"),l(s),r(!0)},[t,l]),C=c4(d4("stores")),N=()=>{y("\u0410\u0440\u043E\u043C\u0430\u0442 \u0431\u044B\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D.",{variant:"success"})},n=()=>{y("\u041D\u0435 \u043F\u043E\u043B\u0443\u0447\u0438\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0440\u043E\u043C\u0430\u0442 ://",{variant:"error"})},q=E.exports.useMemo(()=>[{key:"actions",header:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F",size:"max-content",render:s=>d(M,{direction:"row",spacing:1,children:[u(J,{title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",children:u(U,{onClick:()=>B(s),children:u(h4,{})})}),u(J,{title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",children:u(U,{onClick:()=>Y(w4(s.id),N,n),children:u(E4,{})})})]})},{key:"city",header:"\u0413\u043E\u0440\u043E\u0434",size:"max-content",render:s=>{var F,D;return u(k,{children:(D=i((F=s.cityId)!=null?F:""))==null?void 0:D.name})}},{key:"address",header:"\u0410\u0434\u0440\u0435\u0441",size:"max-content",render:s=>d(k,{children:["\u0443\u043B. ",s.streetName,", \u0434. ",s.building]})},{key:"workingTime",header:"\u0432\u0440\u0435\u043C\u044F \u0440\u0430\u0431\u043E\u0442\u044B",size:"max-content",render:s=>d(k,{children:[s.workingTimeStart,":",s.workingTimeEnd]})},{key:"comment",header:"\u041A\u043E\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439",size:"max-content",render:s=>u(k,{children:s.comment})}],[i,B]);return d(k,{children:[u(k4,{variant:"h3",component:"h1",children:"\u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432"}),d(y4,{config:q,children:[u(B4,{}),u("tbody",{children:C==null?void 0:C.map(s=>u(T4,{row:s},s.id))})]}),u(x4,{}),u(b4,{onClick:()=>{t("create"),r(!0)}})]})};export{M4 as default};
