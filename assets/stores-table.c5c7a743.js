var e4=Object.defineProperty,r4=Object.defineProperties;var t4=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var s4=Object.prototype.hasOwnProperty,n4=Object.prototype.propertyIsEnumerable;var Q=(t,r,i)=>r in t?e4(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,m=(t,r)=>{for(var i in r||(r={}))s4.call(r,i)&&Q(t,i,r[i]);if(P)for(var i of P(r))n4.call(r,i)&&Q(t,i,r[i]);return t},g=(t,r)=>r4(t,t4(r));import{V as o4,ay as X,a3 as N,r as x,aA as a4,az as i4,p as l,m as e,a4 as R,b1 as c4,b2 as m4,bf as l4}from"./index.070e2350.js";import{u as d4,c as p4,h as I,C as h,d as y,T as G,I as J,E as g4,D as C4,a as h4,b as x4,F as E4}from"./index.09c9c94c.js";import{m as Y}from"./cities-dialog.ec2a287b.js";import{B as L}from"./Box.94ca329d.js";import{b as K,O as U,S as B4,B as b,a as T4}from"./Option.1a200b87.js";import"./menu.809915cc.js";import"./Typography.62417f56.js";import"./createBox.911b62f2.js";const C=o4(t=>({isOpen:!1,mode:"create",stores:null,currentStore:null,setIsOpen:r=>t({isOpen:r}),setStores:r=>t({stores:r}),setMode:r=>t({mode:r}),setCurrentStore:r=>t({currentStore:r,mode:"edit"}),clearCurrentStore:()=>t({currentStore:null,mode:"create"})})),y4=t=>()=>i4("stores",t),b4=t=>()=>a4("stores",t.id,t),O=["\u0443\u043B\u0438\u0446\u0430","\u043F\u0435\u0440\u0435\u0443\u043B\u043E\u043A","\u043F\u0440\u043E\u0441\u043F\u0435\u043A\u0442"],d={cityName:"",building:"",comment:"",streetName:"",streetType:O[0],workingTimeStart:"9",workingTimeEnd:"21"},k4=()=>{const{enqueueSnackbar:t}=X(),{control:r,handleSubmit:i,setValue:c,reset:E,clearErrors:B}=d4({defaultValues:d}),p=C(u=>u.mode),A=C(u=>u.isOpen),s=C(u=>u.currentStore),q=C(u=>u.setIsOpen),n=C(u=>u.clearCurrentStore),k=N(u=>u.getCityById),w=N(u=>u.getCityByName),z=N(u=>u.cities),W=x.exports.useCallback(()=>{E(d),B()},[E,B]),M=()=>{W(),q(!1),n()};x.exports.useEffect(()=>{var u,o,a,D,f,F,v,S,T;c("streetType",(u=s==null?void 0:s.streetType)!=null?u:d.streetType),c("streetName",(o=s==null?void 0:s.streetName)!=null?o:d.streetName),c("building",(a=s==null?void 0:s.building)!=null?a:d.building),c("comment",(D=s==null?void 0:s.comment)!=null?D:d.comment),c("workingTimeStart",(f=s==null?void 0:s.workingTimeStart)!=null?f:d.workingTimeStart),c("workingTimeEnd",(F=s==null?void 0:s.workingTimeEnd)!=null?F:d.workingTimeEnd),c("cityName",(T=(S=k((v=s==null?void 0:s.cityId)!=null?v:""))==null?void 0:S.name)!=null?T:d.cityName)},[s]);const $=()=>{t("Success",{variant:"success"}),M(),W()},V=()=>{t("Something went wrong",{variant:"error"})},Z=x.exports.useMemo(()=>`${p==="create"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C":"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"} \u043C\u0430\u0433\u0430\u0437\u0438\u043D`,[p]),_=x.exports.useCallback(u=>{var j,H;const{workingTimeEnd:o,workingTimeStart:a,comment:D,building:f,streetType:F,streetName:v,cityName:S}=u,T={workingTimeStart:a,workingTimeEnd:o,comment:D,building:f,streetType:F,streetName:v,cityId:(H=(j=w(S))==null?void 0:j.id)!=null?H:""},u4=p==="edit"&&s?b4(m(m({},s),T)):y4(T);return Y(u4,$,V)},[p,s,$,V]);return l(p4,{isOpen:A,onClose:M,onCancel:M,onSubmit:i(_),title:Z,children:[e(I,{children:"\u0410\u0434\u0440\u0435\u0441"}),e(h,{control:r,name:"cityName",render:({field:u})=>l(L,{children:[e(I,{children:"\u0413\u043E\u0440\u043E\u0434"}),e(K,g(m({variant:"soft"},u),{componentsProps:{listbox:{sx:{maxHeight:240,overflow:"auto","--List-padding":"0px"}}},children:z==null?void 0:z.map(o=>e(U,{value:o.name,children:o.name},o.id))}))]})}),l(R,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2},alignItems:{xs:"stretch",sm:"flex-end"},children:[e(h,{control:r,name:"streetType",render:({field:u})=>l(L,{sx:{width:{xs:"100%",sm:130},minWidth:{xs:"100%",sm:130},maxWidth:{xs:"100%",sm:130}},children:[e(I,{children:"\u0422\u0438\u043F \u0443\u043B\u0438\u0446\u044B"}),e(K,g(m({variant:"soft"},u),{componentsProps:{listbox:{sx:{maxHeight:240,overflow:"auto","--List-padding":"0px"}}},children:O==null?void 0:O.map(o=>e(U,{value:o,children:o},o))}))]})}),e(h,{name:"streetName",rules:{required:{message:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0443\u043B\u0438\u0446\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:r,render:({field:u,fieldState:o})=>{var a;return e(y,g(m({label:"\u0423\u043B\u0438\u0446\u0430",variant:"soft",fullWidth:!0},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))}}),e(h,{name:"building",rules:{required:{message:"\u041D\u043E\u043C\u0435\u0440 \u0437\u0434\u0430\u043D\u0438\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:r,render:({field:u,fieldState:o})=>{var a;return e(L,{sx:{width:{xs:"100%",sm:100}},children:e(y,g(m({label:"\u0417\u0434\u0430\u043D\u0438\u0435",variant:"soft"},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))})}})]}),e(h,{name:"comment",control:r,render:({field:u,fieldState:o})=>{var a;return e(y,g(m({label:"\u041A\u043E\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439",variant:"soft",fullWidth:!0},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))}}),l(R,{direction:"column",children:[e(I,{sx:{marginTop:1},children:"\u0420\u0430\u0431\u043E\u0447\u0435\u0435 \u0432\u0440\u0435\u043C\u044F:"}),l(R,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2},children:[e(h,{name:"workingTimeStart",control:r,rules:{required:{message:"\u0412\u0440\u0435\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},render:({field:u,fieldState:o})=>{var a;return e(y,g(m({label:"\u041D\u0430\u0447\u0430\u043B\u043E",variant:"soft"},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))}}),e(h,{name:"workingTimeEnd",control:r,rules:{required:{message:"\u0412\u0440\u0435\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},render:({field:u,fieldState:o})=>{var a;return e(y,g(m({label:"\u041A\u043E\u043D\u0435\u0446",variant:"soft"},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))}})]})]})]})},w4=t=>()=>l4("stores",t),q4=()=>{const t=C(n=>n.setMode),r=C(n=>n.setIsOpen),i=N(n=>n.getCityById),c=C(n=>n.setCurrentStore),{enqueueSnackbar:E}=X(),B=x.exports.useCallback(n=>{t("edit"),c(n),r(!0)},[t,c]),p=c4(m4("stores")),A=()=>{E("\u0410\u0440\u043E\u043C\u0430\u0442 \u0431\u044B\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D.",{variant:"success"})},s=()=>{E("\u041D\u0435 \u043F\u043E\u043B\u0443\u0447\u0438\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0440\u043E\u043C\u0430\u0442 ://",{variant:"error"})},q=x.exports.useMemo(()=>[{key:"actions",header:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F",size:"max-content",render:n=>l(B4,{direction:"row",spacing:1,children:[e(G,{title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",children:e(J,{variant:"plain",onClick:()=>B(n),children:e(g4,{})})}),e(G,{title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",children:e(J,{variant:"plain",onClick:()=>Y(w4(n.id),A,s),children:e(C4,{})})})]})},{key:"city",header:"\u0413\u043E\u0440\u043E\u0434",size:"max-content",render:n=>{var k,w;return e(b,{children:(w=i((k=n.cityId)!=null?k:""))==null?void 0:w.name})}},{key:"address",header:"\u0410\u0434\u0440\u0435\u0441",size:"max-content",render:n=>l(b,{children:["\u0443\u043B. ",n.streetName,", \u0434. ",n.building]})},{key:"workingTime",header:"\u0432\u0440\u0435\u043C\u044F \u0440\u0430\u0431\u043E\u0442\u044B",size:"max-content",render:n=>l(b,{children:[n.workingTimeStart,":",n.workingTimeEnd]})},{key:"comment",header:"\u041A\u043E\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439",size:"max-content",render:n=>e(b,{children:n.comment})}],[i,B]);return l(b,{children:[e(T4,{level:"h3",component:"h1",marginBottom:2,children:"\u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432"}),e(h4,{config:q,children:p==null?void 0:p.map(n=>e(x4,{row:n},n.id))}),e(k4,{}),e(E4,{onClick:()=>{t("create"),r(!0)}})]})};export{q4 as default};
