var e4=Object.defineProperty,r4=Object.defineProperties;var t4=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var s4=Object.prototype.hasOwnProperty,n4=Object.prototype.propertyIsEnumerable;var Q=(t,r,i)=>r in t?e4(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,m=(t,r)=>{for(var i in r||(r={}))s4.call(r,i)&&Q(t,i,r[i]);if(V)for(var i of V(r))n4.call(r,i)&&Q(t,i,r[i]);return t},g=(t,r)=>r4(t,t4(r));import{af as o4,al as K,am as N,r as x,au as a4,at as i4,z as l,l as e,an as R,aY as c4,aZ as m4,ao as l4}from"./index.aac1386d.js";import{u as d4,b as p4,d as I,C as h,c as k,E as g4,D as C4,B as y,T as h4,a as x4,F as E4}from"./index.f78333c3.js";import{m as U}from"./cities-dialog.5c6a350a.js";import{B as L}from"./Box.0ef9a98d.js";import{b as Y,O as Z,S as B4,a as T4}from"./Option.73bd4d9e.js";import{T as G,I as J}from"./IconButton.1a5f5d92.js";import"./Typography.8dd6985a.js";import"./ListItemButton.033f09aa.js";const C=o4(t=>({isOpen:!1,mode:"create",stores:null,currentStore:null,setIsOpen:r=>t({isOpen:r}),setStores:r=>t({stores:r}),setMode:r=>t({mode:r}),setCurrentStore:r=>t({currentStore:r,mode:"edit"}),clearCurrentStore:()=>t({currentStore:null,mode:"create"})})),k4=t=>()=>i4("stores",t),y4=t=>()=>a4("stores",t.id,t),O=["\u0443\u043B\u0438\u0446\u0430","\u043F\u0435\u0440\u0435\u0443\u043B\u043E\u043A","\u043F\u0440\u043E\u0441\u043F\u0435\u043A\u0442"],d={cityName:"",building:"",comment:"",streetName:"",streetType:O[0],workingTimeStart:"9",workingTimeEnd:"21"},b4=()=>{const{enqueueSnackbar:t}=K(),{control:r,handleSubmit:i,setValue:c,reset:E,clearErrors:B}=d4({defaultValues:d}),p=C(u=>u.mode),q=C(u=>u.isOpen),s=C(u=>u.currentStore),A=C(u=>u.setIsOpen),n=C(u=>u.clearCurrentStore),b=N(u=>u.getCityById),w=N(u=>u.getCityByName),z=N(u=>u.cities),W=x.exports.useCallback(()=>{E(d),B()},[E,B]),M=()=>{W(),A(!1),n()};x.exports.useEffect(()=>{var u,o,a,D,f,F,v,S,T;c("streetType",(u=s==null?void 0:s.streetType)!=null?u:d.streetType),c("streetName",(o=s==null?void 0:s.streetName)!=null?o:d.streetName),c("building",(a=s==null?void 0:s.building)!=null?a:d.building),c("comment",(D=s==null?void 0:s.comment)!=null?D:d.comment),c("workingTimeStart",(f=s==null?void 0:s.workingTimeStart)!=null?f:d.workingTimeStart),c("workingTimeEnd",(F=s==null?void 0:s.workingTimeEnd)!=null?F:d.workingTimeEnd),c("cityName",(T=(S=b((v=s==null?void 0:s.cityId)!=null?v:""))==null?void 0:S.name)!=null?T:d.cityName)},[s]);const $=()=>{t("Success",{variant:"success"}),M(),W()},j=()=>{t("Something went wrong",{variant:"error"})},X=x.exports.useMemo(()=>`${p==="create"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C":"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"} \u043C\u0430\u0433\u0430\u0437\u0438\u043D`,[p]),_=x.exports.useCallback(u=>{var H,P;const{workingTimeEnd:o,workingTimeStart:a,comment:D,building:f,streetType:F,streetName:v,cityName:S}=u,T={workingTimeStart:a,workingTimeEnd:o,comment:D,building:f,streetType:F,streetName:v,cityId:(P=(H=w(S))==null?void 0:H.id)!=null?P:""},u4=p==="edit"&&s?y4(m(m({},s),T)):k4(T);return U(u4,$,j)},[p,s,$,j]);return l(p4,{isOpen:q,onClose:M,onCancel:M,onSubmit:i(_),title:X,children:[e(I,{children:"\u0410\u0434\u0440\u0435\u0441"}),e(h,{control:r,name:"cityName",render:({field:u})=>l(L,{children:[e(I,{children:"\u0413\u043E\u0440\u043E\u0434"}),e(Y,g(m({variant:"soft"},u),{componentsProps:{listbox:{sx:{maxHeight:240,overflow:"auto","--List-padding":"0px"}}},children:z==null?void 0:z.map(o=>e(Z,{value:o.name,children:o.name},o.id))}))]})}),l(R,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2},alignItems:{xs:"stretch",sm:"flex-end"},children:[e(h,{control:r,name:"streetType",render:({field:u})=>l(L,{sx:{width:{xs:"100%",sm:130},minWidth:{xs:"100%",sm:130},maxWidth:{xs:"100%",sm:130}},children:[e(I,{children:"\u0422\u0438\u043F \u0443\u043B\u0438\u0446\u044B"}),e(Y,g(m({variant:"soft"},u),{componentsProps:{listbox:{sx:{maxHeight:240,overflow:"auto","--List-padding":"0px"}}},children:O==null?void 0:O.map(o=>e(Z,{value:o,children:o},o))}))]})}),e(h,{name:"streetName",rules:{required:{message:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0443\u043B\u0438\u0446\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:r,render:({field:u,fieldState:o})=>{var a;return e(k,g(m({label:"\u0423\u043B\u0438\u0446\u0430",variant:"soft",fullWidth:!0},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))}}),e(h,{name:"building",rules:{required:{message:"\u041D\u043E\u043C\u0435\u0440 \u0437\u0434\u0430\u043D\u0438\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:r,render:({field:u,fieldState:o})=>{var a;return e(L,{sx:{width:{xs:"100%",sm:100}},children:e(k,g(m({label:"\u0417\u0434\u0430\u043D\u0438\u0435",variant:"soft"},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))})}})]}),e(h,{name:"comment",control:r,render:({field:u,fieldState:o})=>{var a;return e(k,g(m({label:"\u041A\u043E\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439",variant:"soft",fullWidth:!0},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))}}),l(R,{direction:"column",children:[e(I,{sx:{marginTop:1},children:"\u0420\u0430\u0431\u043E\u0447\u0435\u0435 \u0432\u0440\u0435\u043C\u044F:"}),l(R,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2},children:[e(h,{name:"workingTimeStart",control:r,rules:{required:{message:"\u0412\u0440\u0435\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},render:({field:u,fieldState:o})=>{var a;return e(k,g(m({label:"\u041D\u0430\u0447\u0430\u043B\u043E",variant:"soft"},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))}}),e(h,{name:"workingTimeEnd",control:r,rules:{required:{message:"\u0412\u0440\u0435\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},render:({field:u,fieldState:o})=>{var a;return e(k,g(m({label:"\u041A\u043E\u043D\u0435\u0446",variant:"soft"},u),{error:!!o.error,helperText:(a=o.error)==null?void 0:a.message}))}})]})]})]})},w4=t=>()=>l4("stores",t),A4=()=>{const t=C(n=>n.setMode),r=C(n=>n.setIsOpen),i=N(n=>n.getCityById),c=C(n=>n.setCurrentStore),{enqueueSnackbar:E}=K(),B=x.exports.useCallback(n=>{t("edit"),c(n),r(!0)},[t,c]),p=c4(m4("stores")),q=()=>{E("\u0410\u0440\u043E\u043C\u0430\u0442 \u0431\u044B\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D.",{variant:"success"})},s=()=>{E("\u041D\u0435 \u043F\u043E\u043B\u0443\u0447\u0438\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0440\u043E\u043C\u0430\u0442 ://",{variant:"error"})},A=x.exports.useMemo(()=>[{key:"actions",header:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F",size:"max-content",render:n=>l(B4,{direction:"row",spacing:1,children:[e(G,{title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",children:e(J,{variant:"plain",onClick:()=>B(n),children:e(g4,{})})}),e(G,{title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",children:e(J,{variant:"plain",onClick:()=>U(w4(n.id),q,s),children:e(C4,{})})})]})},{key:"city",header:"\u0413\u043E\u0440\u043E\u0434",size:"max-content",render:n=>{var b,w;return e(y,{children:(w=i((b=n.cityId)!=null?b:""))==null?void 0:w.name})}},{key:"address",header:"\u0410\u0434\u0440\u0435\u0441",size:"max-content",render:n=>l(y,{children:["\u0443\u043B. ",n.streetName,", \u0434. ",n.building]})},{key:"workingTime",header:"\u0432\u0440\u0435\u043C\u044F \u0440\u0430\u0431\u043E\u0442\u044B",size:"max-content",render:n=>l(y,{children:[n.workingTimeStart,":",n.workingTimeEnd]})},{key:"comment",header:"\u041A\u043E\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439",size:"max-content",render:n=>e(y,{children:n.comment})}],[i,B]);return l(y,{children:[e(T4,{level:"h3",component:"h1",marginBottom:2,children:"\u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432"}),e(h4,{config:A,children:p==null?void 0:p.map(n=>e(x4,{row:n},n.id))}),e(b4,{}),e(E4,{onClick:()=>{t("create"),r(!0)}})]})};export{A4 as default};
