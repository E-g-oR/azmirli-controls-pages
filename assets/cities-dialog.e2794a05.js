var $=Object.defineProperty,I=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var A=(e,a,o)=>a in e?$(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,r=(e,a)=>{for(var o in a||(a={}))z.call(a,o)&&A(e,o,a[o]);if(R)for(var o of R(a))G.call(a,o)&&A(e,o,a[o]);return e},f=(e,a)=>I(e,K(a));import{L as H,$ as J,r as c,ak as N,al as P,p as B,j as n}from"./index.749055e5.js";import{u as Q,K as U,b as X,S as Y,C as d,c as b}from"./index.9485b346.js";const E=H(e=>({city:null,isOpen:!1,mode:"create",setCity:a=>e({city:a}),setIsOpen:a=>e({isOpen:a}),setMode:a=>e({mode:a}),setEditCity:a=>e({city:a,mode:"edit",isOpen:!0}),setCreateCity:()=>e({mode:"create",isOpen:!0,city:null})}));function Z(e,a,o){return console.log("[makeRequest] request start"),e().then(l=>{console.log("[makeRequest] request success",l),a()}).catch(l=>{console.log("[makeRequest] request error",l),console.log("\u043E\u0448\u0438\u0431\u043A\u0430",l),o()})}const j=e=>()=>N("cities",e),_=e=>()=>P("cities",e.id,e),y=(e,a)=>r(r({},e),a),s4=({onClose:e})=>{var v,x,h,q,F;const{enqueueSnackbar:a}=J(),o=E(s=>s.mode),l=E(s=>s.isOpen),u=E(s=>s.city),{control:i,handleSubmit:w,formState:{errors:k},setValue:m,reset:g,clearErrors:p}=Q({defaultValues:{name:(v=u==null?void 0:u.name)!=null?v:"",subDomain:(x=u==null?void 0:u.subDomain)!=null?x:"",instagram:(h=u==null?void 0:u.instagram)!=null?h:"",facebook:(q=u==null?void 0:u.facebook)!=null?q:"",vkontakte:(F=u==null?void 0:u.vkontakte)!=null?F:"",id:u==null?void 0:u.id}}),D=c.exports.useCallback(()=>{g(),p()},[g,p]),T=c.exports.useMemo(()=>o==="edit"?"\u0417\u0430\u043F\u0438\u0441\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0430!":"\u0417\u0430\u043F\u0438\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u043D\u0430!",[o]),L=()=>{a(T,{variant:"success"}),e(),D()},M=()=>{a("\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A",{variant:"error"})};c.exports.useEffect(()=>{var s,t,S,C,O;m("id",u==null?void 0:u.id),m("name",(s=u==null?void 0:u.name)!=null?s:""),m("subDomain",(t=u==null?void 0:u.subDomain)!=null?t:""),m("instagram",(S=u==null?void 0:u.instagram)!=null?S:""),m("vkontakte",(C=u==null?void 0:u.vkontakte)!=null?C:""),m("facebook",(O=u==null?void 0:u.facebook)!=null?O:"")},[u]),c.exports.useEffect(()=>{o==="create"&&D()},[o]);const V=(o==="create"?"\u0421\u043E\u0437\u0434\u0430\u0442\u044C":"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C")+" \u0433\u043E\u0440\u043E\u0434 "+(u?u.name:""),W=c.exports.useCallback(s=>{const t=U(o).with("create",()=>j(s)).with("edit",()=>u?_(y(u,s)):j(s)).exhaustive();return Z(t,L,M)},[u,o]);return B(X,{isOpen:l,title:V,onCancel:()=>{e(),D()},onClose:()=>{e(),D()},onSubmit:w(W),children:[B(Y,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2},children:[n(d,{name:"name",rules:{required:{message:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:i,render:({field:s})=>{var t;return n(b,f(r({label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",variant:"soft",fullWidth:!0},s),{error:!!k.name,helperText:(t=k.name)==null?void 0:t.message}))}}),n(d,{name:"subDomain",rules:{required:{message:"\u041F\u043E\u0434\u0434\u043E\u043C\u0435\u043D \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C",value:!0}},control:i,render:({field:s})=>{var t;return n(b,f(r({label:"\u041F\u043E\u0434\u0434\u043E\u043C\u0435\u043D",variant:"soft",fullWidth:!0},s),{error:!!k.subDomain,helperText:(t=k.subDomain)==null?void 0:t.message}))}})]}),n(d,{name:"instagram",control:i,render:({field:s})=>n(b,r({label:"\u0418\u043D\u0441\u0442\u0430\u0433\u0440\u0430\u043C",variant:"soft"},s))}),n(d,{name:"vkontakte",control:i,render:({field:s})=>n(b,r({label:"\u0412\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u0435",variant:"soft"},s))}),n(d,{name:"facebook",control:i,render:({field:s})=>n(b,r({label:"\u0424\u0435\u0439\u0441\u0431\u0443\u043A",variant:"soft"},s))})]})};export{s4 as C,Z as m,E as u};
